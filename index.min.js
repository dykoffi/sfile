const app=require("./app"),debug=require("debug")("api:server"),http=require("http"),port=normalizePort(process.env.PORT||"9200");app.set("port",port);const server=http.createServer(app);function normalizePort(e){const r=parseInt(e,10);return isNaN(r)?e:r>=0&&r}function onError(e){if("listen"!==e.syscall)throw e;const r="string"==typeof port?"Pipe "+port:"Port "+port;switch(e.code){case"EACCES":console.error(r+" requires elevated privileges"),process.exit(1);break;case"EADDRINUSE":console.error(r+" is already in use"),process.exit(1);break;default:throw e}}function onListening(){const e=server.address(),r="string"==typeof e?"pipe "+e:"port "+e.port;debug("Listening on "+r)}server.listen(port),server.on("error",onError),server.on("listening",onListening);const io=require("socket.io").listen(server);io.sockets.on("connection",(function(e,r){})),console.log("start on port : "+port),module.exports=io;
